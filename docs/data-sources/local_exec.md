---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "terrapwner_local_exec Data Source - terrapwner"
subcategory: ""
description: |-
  Executes a local command and captures its output, exit code, and runtime details. This data source is used in CI/CD pipeline assessments to determine what can be executed inside the Terraform runtime environment. Commands are executed with a configurable timeout (default: 30 seconds).
---

# terrapwner_local_exec (Data Source)

Executes a local command and captures its output, exit code, and runtime details. This data source is used in CI/CD pipeline assessments to determine what can be executed inside the Terraform runtime environment. Commands are executed with a configurable timeout (default: 30 seconds).

## Example Usage

```terraform
terraform {
  required_providers {
    terrapwner = {
      source = "hashicorp.com/DataDog/terrapwner"
    }
  }
}

provider "terrapwner" {}

# Simple example: list directory contents in long format
data "terrapwner_local_exec" "ls" {
  command = ["ls", "-l"]
}

# Example with stderr output: try to list a non-existent directory
data "terrapwner_local_exec" "ls_error" {
  command        = ["ls", "non_existent_directory"]
  expect_success = false
}

# Example with non-existing command
data "terrapwner_local_exec" "non_existent" {
  command        = ["this_command_does_not_exist"]
  expect_success = false
}

# Example with custom timeout: this will fail after 5 seconds
data "terrapwner_local_exec" "timeout" {
  command = ["sleep", "10"]
  timeout = 5
}

# Output the directory listing
output "directory_listing" {
  description = "Contents of the current directory"
  value       = data.terrapwner_local_exec.ls.stdout
}

# Output the error message from ls command
output "ls_error_message" {
  description = "Error message from trying to list non-existent directory"
  value       = data.terrapwner_local_exec.ls_error.stderr
}

# Output the error from non-existing command
output "non_existent_error" {
  description = "Error message from trying to run non-existing command"
  value       = data.terrapwner_local_exec.non_existent.fail_reason
}

# Output the timeout error
output "timeout_error" {
  description = "Error message from command timing out"
  value       = data.terrapwner_local_exec.timeout.fail_reason
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `command` (List of String) The command to execute as a list of strings. The first element is the executable, and the rest are arguments.

### Optional

- `expect_success` (Boolean) Whether an exit code of 0 is expected (default: true).
- `fail_on_error` (Boolean) Whether to fail the Terraform operation if the command fails (default: false).
- `timeout` (Number) Timeout in seconds for command execution (default: 30).

### Read-Only

- `duration_ms` (Number) Total execution time in milliseconds.
- `exit_code` (Number) Exit code of the process.
- `fail_reason` (String) If execution fails or times out, this contains the error.
- `stderr` (String) Captured standard error.
- `stdout` (String) Captured standard output.
- `success` (Boolean) True if the command exited with code 0.
